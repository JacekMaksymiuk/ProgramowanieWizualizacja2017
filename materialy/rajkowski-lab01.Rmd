---
title: "Laboratorium 1"
author: "Łukasz Rajkowski"
date: "06/10/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Do zrobienia

1. Pobierz plik https://github.com/pbiecek/PISA2012lite/blob/master/data/student2012.rda
```{r}
load("~/Dropbox/RiWizualizacja/student2012.rda")
pisa <- student2012
# head(pisa)
```
Wydaje się, że szczęśliwie się zainstalowało. :) 

2. Wybierz ciekawą zmienną (patrz opis http://www.oecd.org/pisa/pisaproducts/PISA12_StQ_FORM_A_ENG.pdf)

Zobaczmy najpierw, jak wyglądają nazwy kolumn:
```{r, eval=FALSE}
colnames(pisa)
```
Trochę tego jest... i na razie nie rozumiem, co jest czym czego. Spodobało mi się pytanie ST49Q01, 
opisujące, jak często uczestnicy rozmawiają o problemach matematycznych ze swoimi znajomymi.
```{r}
my_question <- pisa$ST49Q01
table(my_question)
```
Teraz popatrzmy na `barplot`
```{r}
barplot(table(my_question), main="Bar Plot")
```
... przyznam, że spodziewałbym się istotnej dominacji odpowiedzi `Never`. :) A co z `mosaicplot`
```{r}
mosaicplot(table(my_question), main="Mosaic Plot")
```
Chociaż z drugiej strony, może w ramach `Sometimes` mieści się konsultowanie prac domowych z matematyki, etc.

To teraz popatrzmy, jak to wygląda w podziale na kraje
```{r}
table(pisa$ST49Q01,pisa$CNT)
```
A co z danami proporcjonalności?
```{r}
histPerCnt <- prop.table(table(pisa$CNT, my_question),1)
histPerCnt
```

3. Przygotuj raport w knitrze przedstawiający rozkład wybranej zmiennej dla różnych krajów
Wybierzmy teraz część wyników z tabeli `histPerCnt`. Spójrzmy, jak uszeregowane są kraje względem częstości występowania dzieci, które bardzo często rozmawiają o matematyce.
```{r}
sort(histPerCnt[,1])
```
... a jak ma się Polska do Niemiec?
```{r}
histPerCnt[c("Poland","Germany"),]
```
No proszę, w Polsce częściej młodzież rozmawia o matematyce!

Teraz przechodzimy do zmiennych ilościowych
```{r}
score <- pisa$PV1MATH
mean(score)
```
A teraz robimy to w kategoriach przy użyciu `tapply`
```{r}
sort(tapply(score,pisa$CNT,mean))
```



4. Umieść w raporcie wykres, tabelę, kod R, krótki opis z formatowaniem.

